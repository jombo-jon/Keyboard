#include "jombojon.h"
#include "features/achordion.h"

#define ___ KC_NO

#define LAYOUT_atreus( \
  k00, k01, k02, k03, k04,           k05, k06, k07, k08, k09, \
  k10, k11, k12, k13, k14,           k15, k16, k17, k18, k19, \
  k20, k21, k22, k23, k24, k25, k26, k27, k28, k29, k2a, k2b, \
  k30, k31, k32, k33, k34, k35, k36, k37, k38, k39, k3a, k3b \
) \
{ \
    { k00, k01, k02, k03, k04, ___, ___, k05, k06, k07, k08, k09 }, \
    { k10, k11, k12, k13, k14, ___, ___, k15, k16, k17, k18, k19 }, \
    { k20, k21, k22, k23, k24, k25, k26, k27, k28, k29, k2a, k2b}, \
    { k30, k31, k32, k33, k34, k35, k36, k37, k38, k39, k3a, k3b } \
}

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_QWERTY] = LAYOUT_atreus_wrapper( /*Qwerty */
    _________________QWERTY_L1_________________,                   _________________QWERTY_R1_________________,
    _________________QWERTY_L2_________________,                   _________________QWERTY_R2_________________,
    _________________QWERTY_L3_________________,                _______, _______, _________________QWERTY_R3_________________,
    _______ , _______, _______, LT(_MEDIA,KC_DEL), LT(_SYMBOLS,KC_TAB), _______, _______,LT(_NUMBERS, KC_SPC), LT(_OPTIONS,KC_BSPC),_______, _______, _______
  ),
    [_NUMBERS] = LAYOUT_atreus_wrapper( 
    _________________NUMBER_L1_________________,                   _________________NUMBER_R1_________________,
    _________________NUMBER_L2_________________,                   _________________NUMBER_R2_________________,
    _________________NUMBER_L3_________________, _______, _______, _________________NUMBER_R3_________________,
    _______, _______, _______,_______, LT(_NAV,KC_EQL), _______, _______, _______, _______, _______, _______, _______
  ),
  [_SYMBOLS] = LAYOUT_atreus_wrapper(
    _________________SYMBOL_L1_________________,                  _________________SYMBOL_R1_________________,
    _________________SYMBOL_L2_________________,                   _________________SYMBOL_R2_________________,
    _________________SYMBOL_L3_________________, _______, _______, _________________SYMBOL_R3_________________,
    _______,_______ , _______, _______, _______, _______,_______,  MO(_NAV), _______, _______, _______,_______
    ),
  [_NAV] = LAYOUT_atreus_wrapper( 
    ________________NAV_L1_____________________,                   ________________NAV_R1_____________________,
    ________________NAV_L2_____________________,                   ________________NAV_R2_____________________,
    ________________NAV_L3_____________________, _______, _______, ________________NAV_R3_____________________,
    _______ , _______, _______, _______, _______,  _______, _______, _______, _______, _______, _______, _______
    ),
[_MEDIA] = LAYOUT_atreus_wrapper(
    _________________MEDIA_L1_________________,                     _________________MEDIA_R1_________________, 
    _________________MEDIA_L2_________________,                     _________________MEDIA_R2_________________, 
    _________________MEDIA_L3_________________, _______ , _______,  _________________MEDIA_R3_________________, 
    _______, _______, _______, _______, _______, _______, _______, _______, KC_MPLY, _______, _______, _______
    ),
[_ACCENTS] = LAYOUT_atreus_wrapper( 
    _________________ACCENT_L1_________________,                   _________________ACCENT_R1_________________,
    _________________ACCENT_L2_________________,                   _________________ACCENT_R2_________________,
    _________________ACCENT_L3_________________, _______, _______, _________________ACCENT_R3_________________,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
   ),

[_OPTIONS] = LAYOUT_atreus_wrapper( 
    _________________OPTION_L1_________________ ,                    _________________OPTION_R1_________________,
    _________________OPTION_L2_________________ ,                   _________________OPTION_R2_________________,
    _________________OPTION_L3_________________ ,_______, _______,  _________________OPTION_R3_________________,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
   )
};

__attribute__ ((weak))
void matrix_init_keymap(void) {}
void matrix_init_user(void) {
    
// Atreus 44 is more often on the Linux so start in Linux mode
  set_unicode_input_mode(UC_LNX);
   
  matrix_init_keymap();
}

bool process_record_user(uint16_t keycode, keyrecord_t* record) {
  if (!process_achordion(keycode, record)) { return false; }
  // Your macros ...

  return true;
}
/* #ifdef ENCODER_ENABLE */
/* void encoder_update_user(uint8_t index, bool clockwise) { */
/*   if (clockwise) { */
/*         tap_code16(KC_VOLU); */
/*   } */ 
/*   else { */
/*        tap_code16(KC_VOLD); */
/*   } */
/* } */
/* #endif */

